#!/usr/bin/env node
"use strict";
/**
 * CDK App Entry Point
 *
 * Generated by: claude-3.5-sonnet
 * Timestamp: 2025-11-12T17:00:00Z
 * Version: 1.0.0
 * Policy Version: v1.0.0
 * Traceability: TASK-1 â†’ Infrastructure Setup
 * Review Status: Pending
 * Risk Level: Level 2
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = __importStar(require("aws-cdk-lib"));
const dotenv = __importStar(require("dotenv"));
const data_stack_1 = require("../lib/data-stack");
const iam_stack_1 = require("../lib/iam-stack");
const compute_stack_1 = require("../lib/compute-stack");
const orchestration_stack_1 = require("../lib/orchestration-stack");
const onboarding_orchestration_stack_1 = require("../lib/onboarding-orchestration-stack");
const api_stack_1 = require("../lib/api-stack");
const monitoring_stack_1 = require("../lib/monitoring-stack");
const bff_stack_1 = require("../lib/bff-stack");
const auth_stack_1 = require("../lib/auth-stack");
const waf_stack_1 = require("../lib/waf-stack");
const frontend_stack_1 = require("../lib/frontend-stack");
const config_loader_1 = require("../../config/config-loader");
// Load environment variables (optional, config file takes precedence)
dotenv.config();
const app = new cdk.App();
// Load configuration from JSON file
const config = config_loader_1.ConfigLoader.load();
// Deployment configuration from config file
const account = process.env.CDK_DEFAULT_ACCOUNT || config.deployment.management_account_id;
const region = config.deployment.region;
const externalId = config.cross_account.external_id;
// Validate required configuration
if (!account) {
    throw new Error('AWS_ACCOUNT_ID or CDK_DEFAULT_ACCOUNT must be set');
}
const env = {
    account,
    region,
};
// ========================================
// Data Stack (DynamoDB + S3)
// ========================================
const dataStack = new data_stack_1.DataStack(app, 'RDSDashboard-Data', {
    env,
    description: 'RDS Dashboard - Data Layer (DynamoDB tables and S3 buckets)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// IAM Stack (Roles and Policies)
// ========================================
const iamStack = new iam_stack_1.IamStack(app, 'RDSDashboard-IAM', {
    env,
    externalId,
    rdsInventoryTable: dataStack.rdsInventoryTable,
    metricsCacheTable: dataStack.metricsCacheTable,
    healthAlertsTable: dataStack.healthAlertsTable,
    auditLogTable: dataStack.auditLogTable,
    approvalsTable: dataStack.approvalsTable,
    dataBucket: dataStack.dataBucket,
    description: 'RDS Dashboard - IAM Layer (Lambda execution role and cross-account roles)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// IAM stack depends on data stack
iamStack.addDependency(dataStack);
// ========================================
// Compute Stack (Lambda Functions)
// ========================================
// Get enabled accounts and regions from config
const targetAccounts = config_loader_1.ConfigLoader.getEnabledAccounts(config);
const targetRegions = config_loader_1.ConfigLoader.getEnabledRegions(config);
const snsTopicArn = `arn:aws:sns:${region}:${account}:rds-dashboard-alerts`;
const computeStack = new compute_stack_1.ComputeStack(app, 'RDSDashboard-Compute', {
    env,
    lambdaExecutionRole: iamStack.lambdaExecutionRole,
    rdsInventoryTable: dataStack.rdsInventoryTable,
    metricsCacheTable: dataStack.metricsCacheTable,
    healthAlertsTable: dataStack.healthAlertsTable,
    auditLogTable: dataStack.auditLogTable,
    approvalsTable: dataStack.approvalsTable,
    onboardingStateTable: dataStack.onboardingStateTable,
    onboardingAuditLogTable: dataStack.onboardingAuditLogTable,
    externalIdKmsKey: dataStack.externalIdKmsKey,
    dataBucket: dataStack.dataBucket,
    externalId,
    targetAccounts,
    targetRegions,
    snsTopicArn,
    description: 'RDS Dashboard - Compute Layer (Lambda functions)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Compute stack depends on IAM stack
computeStack.addDependency(iamStack);
// ========================================
// Orchestration Stack (EventBridge Rules)
// ========================================
const orchestrationStack = new orchestration_stack_1.OrchestrationStack(app, 'RDSDashboard-Orchestration', {
    env,
    discoveryFunction: computeStack.discoveryFunction,
    healthMonitorFunction: computeStack.healthMonitorFunction,
    discoverySchedule: 'rate(1 hour)', // Every hour
    healthMonitorSchedule: 'rate(5 minutes)', // Every 5 minutes
    description: 'RDS Dashboard - Orchestration Layer (EventBridge scheduled rules)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Orchestration stack depends on compute stack
orchestrationStack.addDependency(computeStack);
// ========================================
// Onboarding Orchestration Stack (EventBridge Rules for Account Discovery)
// ========================================
const onboardingOrchestrationStack = new onboarding_orchestration_stack_1.OnboardingOrchestrationStack(app, 'RDSDashboard-OnboardingOrchestration', {
    env,
    accountDiscoveryFunction: computeStack.accountDiscoveryFunction,
    description: 'RDS Dashboard - Onboarding Orchestration Layer (EventBridge rules for account discovery)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
        Feature: 'AutomatedOnboarding',
    },
});
// Onboarding orchestration stack depends on compute stack
onboardingOrchestrationStack.addDependency(computeStack);
// ========================================
// API Stack (API Gateway)
// ========================================
const apiStack = new api_stack_1.ApiStack(app, 'RDSDashboard-API', {
    env,
    queryHandlerFunction: computeStack.queryHandlerFunction,
    operationsFunction: computeStack.operationsFunction,
    cloudOpsGeneratorFunction: computeStack.cloudOpsGeneratorFunction,
    monitoringFunction: computeStack.monitoringFunction,
    approvalWorkflowFunction: computeStack.approvalWorkflowFunction,
    description: 'RDS Dashboard - API Layer (API Gateway and endpoints)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// API stack depends on compute stack
apiStack.addDependency(computeStack);
// ========================================
// Monitoring Stack (CloudWatch Dashboard and Alarms)
// ========================================
const monitoringStack = new monitoring_stack_1.MonitoringStack(app, 'RDSDashboard-Monitoring', {
    env,
    discoveryFunction: computeStack.discoveryFunction,
    healthMonitorFunction: computeStack.healthMonitorFunction,
    costAnalyzerFunction: computeStack.costAnalyzerFunction,
    complianceCheckerFunction: computeStack.complianceCheckerFunction,
    operationsFunction: computeStack.operationsFunction,
    alertEmail: process.env.ALERT_EMAIL || 'ops@example.com',
    description: 'RDS Dashboard - Monitoring Layer (CloudWatch dashboards and alarms)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Monitoring stack depends on compute stack
monitoringStack.addDependency(computeStack);
// ========================================
// Auth Stack (Cognito User Pool)
// ========================================
const authStack = new auth_stack_1.AuthStack(app, 'RDSDashboard-Auth', {
    env,
    frontendDomain: process.env.FRONTEND_DOMAIN, // Optional: set for production
    description: 'RDS Dashboard - Auth Layer (Cognito User Pool and groups)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// BFF Stack (Backend-for-Frontend with Express Container)
// ========================================
const bffStack = new bff_stack_1.BffStack(app, 'RDSDashboard-BFF', {
    env,
    internalApiUrl: apiStack.api.url,
    apiKeyId: apiStack.apiKey.keyId,
    userPoolId: authStack.userPool.userPoolId,
    userPoolClientId: authStack.userPoolClient.userPoolClientId,
    frontendUrl: process.env.FRONTEND_URL || process.env.FRONTEND_DOMAIN,
    description: 'RDS Dashboard - BFF Layer (Express container with JWT validation and RBAC)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// BFF stack depends on API and Auth stacks
bffStack.addDependency(apiStack);
bffStack.addDependency(authStack);
// ========================================
// WAF Stack (Web Application Firewall)
// ========================================
const wafStack = new waf_stack_1.WafStack(app, 'RDSDashboard-WAF', {
    env,
    apiGateway: apiStack.api,
    rateLimit: 100, // 100 requests per 5 minutes per IP
    blockedCountries: [], // Add country codes to block if needed (e.g., ['CN', 'RU'])
    enableOWASPRules: true,
    enableBotControl: true,
    description: 'RDS Dashboard - WAF Layer (Web Application Firewall protection)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// WAF stack depends on API stack
wafStack.addDependency(apiStack);
// ========================================
// Frontend Stack (S3 + CloudFront)
// ========================================
const frontendStack = new frontend_stack_1.FrontendStack(app, 'RDSDashboard-Frontend', {
    env,
    customDomain: process.env.FRONTEND_DOMAIN,
    certificateArn: process.env.CERTIFICATE_ARN,
    description: 'RDS Dashboard - Frontend Layer (S3 bucket and CloudFront distribution)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// Stack Tags
// ========================================
cdk.Tags.of(app).add('Project', 'RDSDashboard');
cdk.Tags.of(app).add('ManagedBy', 'CDK');
cdk.Tags.of(app).add('CostCenter', 'DBA-Team');
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7Ozs7Ozs7Ozs7R0FVRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCx1Q0FBcUM7QUFDckMsaURBQW1DO0FBQ25DLCtDQUFpQztBQUNqQyxrREFBOEM7QUFDOUMsZ0RBQTRDO0FBQzVDLHdEQUFvRDtBQUNwRCxvRUFBZ0U7QUFDaEUsMEZBQXFGO0FBQ3JGLGdEQUE0QztBQUM1Qyw4REFBMEQ7QUFDMUQsZ0RBQTRDO0FBQzVDLGtEQUE4QztBQUM5QyxnREFBNEM7QUFDNUMsMERBQXNEO0FBQ3RELDhEQUEwRDtBQUUxRCxzRUFBc0U7QUFDdEUsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRWhCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLG9DQUFvQztBQUNwQyxNQUFNLE1BQU0sR0FBRyw0QkFBWSxDQUFDLElBQUksRUFBRSxDQUFDO0FBRW5DLDRDQUE0QztBQUM1QyxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7QUFDM0YsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7QUFFcEQsa0NBQWtDO0FBQ2xDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQztBQUN2RSxDQUFDO0FBRUQsTUFBTSxHQUFHLEdBQUc7SUFDVixPQUFPO0lBQ1AsTUFBTTtDQUNQLENBQUM7QUFFRiwyQ0FBMkM7QUFDM0MsNkJBQTZCO0FBQzdCLDJDQUEyQztBQUMzQyxNQUFNLFNBQVMsR0FBRyxJ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SUFDM0MsV0FBVyxFQUFFLHdFQUF3RTtJQUNyRixJQUFJLEVBQUU7UUFDSixPQUFPLEVBQUUsY0FBYztRQUN2QixTQUFTLEVBQUUsS0FBSztLQUNqQjtDQUNGLENBQUMsQ0FBQztBQUVILDJDQUEyQztBQUMzQyxhQUFhO0FBQ2IsMkNBQTJDO0FBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDaEQsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUN6QyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBRS9DLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcclxuLyoqXHJcbiAqIENESyBBcHAgRW50cnkgUG9pbnRcclxuICogXHJcbiAqIEdlbmVyYXRlZCBieTogY2xhdWRlLTMuNS1zb25uZXRcclxuICogVGltZXN0YW1wOiAyMDI1LTExLTEyVDE3OjAwOjAwWlxyXG4gKiBWZXJzaW9uOiAxLjAuMFxyXG4gKiBQb2xpY3kgVmVyc2lvbjogdjEuMC4wXHJcbiAqIFRyYWNlYWJpbGl0eTogVEFTSy0xIOKGkiBJbmZyYXN0cnVjdHVyZSBTZXR1cFxyXG4gKiBSZXZpZXcgU3RhdHVzOiBQZW5kaW5nXHJcbiAqIFJpc2sgTGV2ZWw6IExldmVsIDJcclxuICovXHJcblxyXG5pbXBvcnQgJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3Rlcic7XHJcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XHJcbmltcG9ydCAqIGFzIGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG5pbXBvcnQgeyBEYXRhU3RhY2sgfSBmcm9tICcuLi9saWIvZGF0YS1zdGFjayc7XHJcbmltcG9ydCB7IElhbVN0YWNrIH0gZnJvbSAnLi4vbGliL2lhbS1zdGFjayc7XHJcbmltcG9ydCB7IENvbXB1dGVTdGFjayB9IGZyb20gJy4uL2xpYi9jb21wdXRlLXN0YWNrJztcclxuaW1wb3J0IHsgT3JjaGVzdHJhdGlvblN0YWNrIH0gZnJvbSAnLi4vbGliL29yY2hlc3RyYXRpb24tc3RhY2snO1xyXG5pbXBvcnQgeyBPbmJvYXJkaW5nT3JjaGVzdHJhdGlvblN0YWNrIH0gZnJvbSAnLi4vbGliL29uYm9hcmRpbmctb3JjaGVzdHJhdGlvbi1zdGFjayc7XHJcbmltcG9ydCB7IEFwaVN0YWNrIH0gZnJvbSAnLi4vbGliL2FwaS1zdGFjayc7XHJcbmltcG9ydCB7IE1vbml0b3JpbmdTdGFjayB9IGZyb20gJy4uL2xpYi9tb25pdG9yaW5nLXN0YWNrJztcclxuaW1wb3J0IHsgQmZmU3RhY2sgfSBmcm9tICcuLi9saWIvYmZmLXN0YWNrJztcclxuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi4vbGliL2F1dGgtc3RhY2snO1xyXG5pbXBvcnQgeyBXYWZTdGFjayB9IGZyb20gJy4uL2xpYi93YWYtc3RhY2snO1xyXG5pbXBvcnQgeyBGcm9udGVuZFN0YWNrIH0gZnJvbSAnLi4vbGliL2Zyb250ZW5kLXN0YWNrJztcclxuaW1wb3J0IHsgQ29uZmlnTG9hZGVyIH0gZnJvbSAnLi4vLi4vY29uZmlnL2NvbmZpZy1sb2FkZXInO1xyXG5cclxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgKG9wdGlvbmFsLCBjb25maWcgZmlsZSB0YWtlcyBwcmVjZWRlbmNlKVxyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xyXG5cclxuLy8gTG9hZCBjb25maWd1cmF0aW9uIGZyb20gSlNPTiBmaWxlXHJcbmNvbnN0IGNvbmZpZyA9IENvbmZpZ0xvYWRlci5sb2FkKCk7XHJcblxyXG4vLyBEZXBsb3ltZW50IGNvbmZpZ3VyYXRpb24gZnJvbSBjb25maWcgZmlsZVxyXG5jb25zdCBhY2NvdW50ID0gcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCB8fCBjb25maWcuZGVwbG95bWVudC5tYW5hZ2VtZW50X2FjY291bnRfaWQ7XHJcbmNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5kZXBsb3ltZW50LnJlZ2lvbjtcclxuY29uc3QgZXh0ZXJuYWxJZCA9IGNvbmZpZy5jcm9zc19hY2NvdW50LmV4dGVybmFsX2lkO1xyXG5cclxuLy8gVmFsaWRhdGUgcmVxdWlyZWQgY29uZmlndXJhdGlvblxyXG5pZiAoIWFjY291bnQpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ0FXU19BQ0NPVU5UX0lEIG9yIENES19ERUZBVUxUX0FDQ09VTlQgbXVzdCBiZSBzZXQnKTtcclxufVxyXG5cclxuY29uc3QgZW52ID0ge1xyXG4gIGFjY291bnQsXHJcbiAgcmVnaW9uLFxyXG59O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBEYXRhIFN0YWNrIChEeW5hbW9EQiArIFMzKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IGRhdGFTdGFjayA9IG5ldyBEYXRhU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLURhdGEnLCB7XHJcbiAgZW52LFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIERhdGEgTGF5ZXIgKER5bmFtb0RCIHRhYmxlcyBhbmQgUzMgYnVja2V0cyknLFxyXG4gIHRhZ3M6IHtcclxuICAgIFByb2plY3Q6ICdSRFNEYXNoYm9hcmQnLFxyXG4gICAgTWFuYWdlZEJ5OiAnQ0RLJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSUFNIFN0YWNrIChSb2xlcyBhbmQgUG9saWNpZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgaWFtU3RhY2sgPSBuZXcgSWFtU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLUlBTScsIHtcclxuICBlbnYsXHJcbiAgZXh0ZXJuYWxJZCxcclxuICByZHNJbnZlbnRvcnlUYWJsZTogZGF0YVN0YWNrLnJkc0ludmVudG9yeVRhYmxlLFxyXG4gIG1ldHJpY3NDYWNoZVRhYmxlOiBkYXRhU3RhY2subWV0cmljc0NhY2hlVGFibGUsXHJcbiAgaGVhbHRoQWxlcnRzVGFibGU6IGRhdGFTdGFjay5oZWFsdGhBbGVydHNUYWJsZSxcclxuICBhdWRpdExvZ1RhYmxlOiBkYXRhU3RhY2suYXVkaXRMb2dUYWJsZSxcclxuICBhcHByb3ZhbHNUYWJsZTogZGF0YVN0YWNrLmFwcHJvdmFsc1RhYmxlLFxyXG4gIGRhdGFCdWNrZXQ6IGRhdGFTdGFjay5kYXRhQnVja2V0LFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIElBTSBMYXllciAoTGFtYmRhIGV4ZWN1dGlvbiByb2xlIGFuZCBjcm9zcy1hY2NvdW50IHJvbGVzKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gSUFNIHN0YWNrIGRlcGVuZHMgb24gZGF0YSBzdGFja1xyXG5pYW1TdGFjay5hZGREZXBlbmRlbmN5KGRhdGFTdGFjayk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENvbXB1dGUgU3RhY2sgKExhbWJkYSBGdW5jdGlvbnMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR2V0IGVuYWJsZWQgYWNjb3VudHMgYW5kIHJlZ2lvbnMgZnJvbSBjb25maWdcclxuY29uc3QgdGFyZ2V0QWNjb3VudHMgPSBDb25maWdMb2FkZXIuZ2V0RW5hYmxlZEFjY291bnRzKGNvbmZpZyk7XHJcbmNvbnN0IHRhcmdldFJlZ2lvbnMgPSBDb25maWdMb2FkZXIuZ2V0RW5hYmxlZFJlZ2lvbnMoY29uZmlnKTtcclxuXHJcbmNvbnN0IHNuc1RvcGljQXJuID0gYGFybjphd3M6c25zOiR7cmVnaW9ufToke2FjY291bnR9OnJkcy1kYXNoYm9hcmQtYWxlcnRzYDtcclxuXHJcbmNvbnN0IGNvbXB1dGVTdGFjayA9IG5ldyBDb21wdXRlU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLUNvbXB1dGUnLCB7XHJcbiAgZW52LFxyXG4gIGxhbWJkYUV4ZWN1dGlvblJvbGU6IGlhbVN0YWNrLmxhbWJkYUV4ZWN1dGlvblJvbGUsXHJcbiAgcmRzSW52ZW50b3J5VGFibGU6IGRhdGFTdGFjay5yZHNJbnZlbnRvcnlUYWJsZSxcclxuICBtZXRyaWNzQ2FjaGVUYWJsZTogZGF0YVN0YWNrLm1ldHJpY3NDYWNoZVRhYmxlLFxyXG4gIGhlYWx0aEFsZXJ0c1RhYmxlOiBkYXRhU3RhY2suaGVhbHRoQWxlcnRzVGFibGUsXHJcbiAgYXVkaXRMb2dUYWJsZTogZGF0YVN0YWNrLmF1ZGl0TG9nVGFibGUsXHJcbiAgYXBwcm92YWxzVGFibGU6IGRhdGFTdGFjay5hcHByb3ZhbHNUYWJsZSxcclxuICBvbmJvYXJkaW5nU3RhdGVUYWJsZTogZGF0YVN0YWNrLm9uYm9hcmRpbmdTdGF0ZVRhYmxlLFxyXG4gIG9uYm9hcmRpbmdBdWRpdExvZ1RhYmxlOiBkYXRhU3RhY2sub25ib2FyZGluZ0F1ZGl0TG9nVGFibGUsXHJcbiAgZXh0ZXJuYWxJZEttc0tleTogZGF0YVN0YWNrLmV4dGVybmFsSWRLbXNLZXksXHJcbiAgZGF0YUJ1Y2tldDogZGF0YVN0YWNrLmRhdGFCdWNrZXQsXHJcbiAgZXh0ZXJuYWxJZCxcclxuICB0YXJnZXRBY2NvdW50cyxcclxuICB0YXJnZXRSZWdpb25zLFxyXG4gIHNuc1RvcGljQXJuLFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIENvbXB1dGUgTGF5ZXIgKExhbWJkYSBmdW5jdGlvbnMpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBDb21wdXRlIHN0YWNrIGRlcGVuZHMgb24gSUFNIHN0YWNrXHJcbmNvbXB1dGVTdGFjay5hZGREZXBlbmRlbmN5KGlhbVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gT3JjaGVzdHJhdGlvbiBTdGFjayAoRXZlbnRCcmlkZ2UgUnVsZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3Qgb3JjaGVzdHJhdGlvblN0YWNrID0gbmV3IE9yY2hlc3RyYXRpb25TdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtT3JjaGVzdHJhdGlvbicsIHtcclxuICBlbnYsXHJcbiAgZGlzY292ZXJ5RnVuY3Rpb246IGNvbXB1dGVTdGFjay5kaXNjb3ZlcnlGdW5jdGlvbixcclxuICBoZWFsdGhNb25pdG9yRnVuY3Rpb246IGNvbXB1dGVTdGFjay5oZWFsdGhNb25pdG9yRnVuY3Rpb24sXHJcbiAgZGlzY292ZXJ5U2NoZWR1bGU6ICdyYXRlKDEgaG91ciknLCAgLy8gRXZlcnkgaG91clxyXG4gIGhlYWx0aE1vbml0b3JTY2hlZHVsZTogJ3JhdGUoNSBtaW51dGVzKScsICAvLyBFdmVyeSA1IG1pbnV0ZXNcclxuICBkZXNjcmlwdGlvbjogJ1JEUyBEYXNoYm9hcmQgLSBPcmNoZXN0cmF0aW9uIExheWVyIChFdmVudEJyaWRnZSBzY2hlZHVsZWQgcnVsZXMpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBPcmNoZXN0cmF0aW9uIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5vcmNoZXN0cmF0aW9uU3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBPbmJvYXJkaW5nIE9yY2hlc3RyYXRpb24gU3RhY2sgKEV2ZW50QnJpZGdlIFJ1bGVzIGZvciBBY2NvdW50IERpc2NvdmVyeSlcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBvbmJvYXJkaW5nT3JjaGVzdHJhdGlvblN0YWNrID0gbmV3IE9uYm9hcmRpbmdPcmNoZXN0cmF0aW9uU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLU9uYm9hcmRpbmdPcmNoZXN0cmF0aW9uJywge1xyXG4gIGVudixcclxuICBhY2NvdW50RGlzY292ZXJ5RnVuY3Rpb246IGNvbXB1dGVTdGFjay5hY2NvdW50RGlzY292ZXJ5RnVuY3Rpb24sXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gT25ib2FyZGluZyBPcmNoZXN0cmF0aW9uIExheWVyIChFdmVudEJyaWRnZSBydWxlcyBmb3IgYWNjb3VudCBkaXNjb3ZlcnkpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgICBGZWF0dXJlOiAnQXV0b21hdGVkT25ib2FyZGluZycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBPbmJvYXJkaW5nIG9yY2hlc3RyYXRpb24gc3RhY2sgZGVwZW5kcyBvbiBjb21wdXRlIHN0YWNrXHJcbm9uYm9hcmRpbmdPcmNoZXN0cmF0aW9uU3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBUEkgU3RhY2sgKEFQSSBHYXRld2F5KVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IGFwaVN0YWNrID0gbmV3IEFwaVN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1BUEknLCB7XHJcbiAgZW52LFxyXG4gIHF1ZXJ5SGFuZGxlckZ1bmN0aW9uOiBjb21wdXRlU3RhY2sucXVlcnlIYW5kbGVyRnVuY3Rpb24sXHJcbiAgb3BlcmF0aW9uc0Z1bmN0aW9uOiBjb21wdXRlU3RhY2sub3BlcmF0aW9uc0Z1bmN0aW9uLFxyXG4gIGNsb3VkT3BzR2VuZXJhdG9yRnVuY3Rpb246IGNvbXB1dGVTdGFjay5jbG91ZE9wc0dlbmVyYXRvckZ1bmN0aW9uLFxyXG4gIG1vbml0b3JpbmdGdW5jdGlvbjogY29tcHV0ZVN0YWNrLm1vbml0b3JpbmdGdW5jdGlvbixcclxuICBhcHByb3ZhbFdvcmtmbG93RnVuY3Rpb246IGNvbXB1dGVTdGFjay5hcHByb3ZhbFdvcmtmbG93RnVuY3Rpb24sXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQVBJIExheWVyIChBUEkgR2F0ZXdheSBhbmQgZW5kcG9pbnRzKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQVBJIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5hcGlTdGFjay5hZGREZXBlbmRlbmN5KGNvbXB1dGVTdGFjayk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIE1vbml0b3JpbmcgU3RhY2sgKENsb3VkV2F0Y2ggRGFzaGJvYXJkIGFuZCBBbGFybXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgbW9uaXRvcmluZ1N0YWNrID0gbmV3IE1vbml0b3JpbmdTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtTW9uaXRvcmluZycsIHtcclxuICBlbnYsXHJcbiAgZGlzY292ZXJ5RnVuY3Rpb246IGNvbXB1dGVTdGFjay5kaXNjb3ZlcnlGdW5jdGlvbixcclxuICBoZWFsdGhNb25pdG9yRnVuY3Rpb246IGNvbXB1dGVTdGFjay5oZWFsdGhNb25pdG9yRnVuY3Rpb24sXHJcbiAgY29zdEFuYWx5emVyRnVuY3Rpb246IGNvbXB1dGVTdGFjay5jb3N0QW5hbHl6ZXJGdW5jdGlvbixcclxuICBjb21wbGlhbmNlQ2hlY2tlckZ1bmN0aW9uOiBjb21wdXRlU3RhY2suY29tcGxpYW5jZUNoZWNrZXJGdW5jdGlvbixcclxuICBvcGVyYXRpb25zRnVuY3Rpb246IGNvbXB1dGVTdGFjay5vcGVyYXRpb25zRnVuY3Rpb24sXHJcbiAgYWxlcnRFbWFpbDogcHJvY2Vzcy5lbnYuQUxFUlRfRU1BSUwgfHwgJ29wc0BleGFtcGxlLmNvbScsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gTW9uaXRvcmluZyBMYXllciAoQ2xvdWRXYXRjaCBkYXNoYm9hcmRzIGFuZCBhbGFybXMpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBNb25pdG9yaW5nIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5tb25pdG9yaW5nU3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBdXRoIFN0YWNrIChDb2duaXRvIFVzZXIgUG9vbClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBhdXRoU3RhY2sgPSBuZXcgQXV0aFN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1BdXRoJywge1xyXG4gIGVudixcclxuICBmcm9udGVuZERvbWFpbjogcHJvY2Vzcy5lbnYuRlJPTlRFTkRfRE9NQUlOLCAvLyBPcHRpb25hbDogc2V0IGZvciBwcm9kdWN0aW9uXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQXV0aCBMYXllciAoQ29nbml0byBVc2VyIFBvb2wgYW5kIGdyb3VwcyknLFxyXG4gIHRhZ3M6IHtcclxuICAgIFByb2plY3Q6ICdSRFNEYXNoYm9hcmQnLFxyXG4gICAgTWFuYWdlZEJ5OiAnQ0RLJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQkZGIFN0YWNrIChCYWNrZW5kLWZvci1Gcm9udGVuZCB3aXRoIEV4cHJlc3MgQ29udGFpbmVyKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IGJmZlN0YWNrID0gbmV3IEJmZlN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1CRkYnLCB7XHJcbiAgZW52LFxyXG4gIGludGVybmFsQXBpVXJsOiBhcGlTdGFjay5hcGkudXJsLFxyXG4gIGFwaUtleUlkOiBhcGlTdGFjay5hcGlLZXkua2V5SWQsXHJcbiAgdXNlclBvb2xJZDogYXV0aFN0YWNrLnVzZXJQb29sLnVzZXJQb29sSWQsXHJcbiAgdXNlclBvb2xDbGllbnRJZDogYXV0aFN0YWNrLnVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXHJcbiAgZnJvbnRlbmRVcmw6IHByb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCBwcm9jZXNzLmVudi5GUk9OVEVORF9ET01BSU4sXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQkZGIExheWVyIChFeHByZXNzIGNvbnRhaW5lciB3aXRoIEpXVCB2YWxpZGF0aW9uIGFuZCBSQkFDKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQkZGIHN0YWNrIGRlcGVuZHMgb24gQVBJIGFuZCBBdXRoIHN0YWNrc1xyXG5iZmZTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcclxuYmZmU3RhY2suYWRkRGVwZW5kZW5jeShhdXRoU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBXQUYgU3RhY2sgKFdlYiBBcHBsaWNhdGlvbiBGaXJld2FsbClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCB3YWZTdGFjayA9IG5ldyBXYWZTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtV0FGJywge1xyXG4gIGVudixcclxuICBhcGlHYXRld2F5OiBhcGlTdGFjay5hcGksXHJcbiAgcmF0ZUxpbWl0OiAxMDAsIC8vIDEwMCByZXF1ZXN0cyBwZXIgNSBtaW51dGVzIHBlciBJUFxyXG4gIGJsb2NrZWRDb3VudHJpZXM6IFtdLCAvLyBBZGQgY291bnRyeSBjb2RlcyB0byBibG9jayBpZiBuZWVkZWQgKGUuZy4sIFsnQ04nLCAnUlUnXSlcclxuICBlbmFibGVPV0FTUFJ1bGVzOiB0cnVlLFxyXG4gIGVuYWJsZUJvdENvbnRyb2w6IHRydWUsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gV0FGIExheWVyIChXZWIgQXBwbGljYXRpb24gRmlyZXdhbGwgcHJvdGVjdGlvbiknLFxyXG4gIHRhZ3M6IHtcclxuICAgIFByb2plY3Q6ICdSRFNEYXNoYm9hcmQnLFxyXG4gICAgTWFuYWdlZEJ5OiAnQ0RLJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFdBRiBzdGFjayBkZXBlbmRzIG9uIEFQSSBzdGFja1xyXG53YWZTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRnJvbnRlbmQgU3RhY2sgKFMzICsgQ2xvdWRGcm9udClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBmcm9udGVuZFN0YWNrID0gbmV3IEZyb250ZW5kU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLUZyb250ZW5kJywge1xyXG4gIGVudixcclxuICBjdXN0b21Eb21haW46IHByb2Nlc3MuZW52LkZST05URU5EX0RPTUFJTixcclxuICBjZXJ0aWZpY2F0ZUFybjogcHJvY2Vzcy5lbnYuQ0VSVElGSUNBVEVfQVJOLFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIEZyb250ZW5kIExheWVyIChTMyBidWNrZXQgYW5kIENsb3VkRnJvbnQgZGlzdHJpYnV0aW9uKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBTdGFjayBUYWdzXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY2RrLlRhZ3Mub2YoYXBwKS5hZGQoJ1Byb2plY3QnLCAnUkRTRGFzaGJvYXJkJyk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdNYW5hZ2VkQnknLCAnQ0RLJyk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdDb3N0Q2VudGVyJywgJ0RCQS1UZWFtJyk7XHJcblxyXG5hcHAuc3ludGgoKTtcclxuIl19