#!/usr/bin/env node
"use strict";
/**
 * CDK App Entry Point
 *
 * Generated by: claude-3.5-sonnet
 * Timestamp: 2025-11-12T17:00:00Z
 * Version: 1.0.0
 * Policy Version: v1.0.0
 * Traceability: TASK-1 â†’ Infrastructure Setup
 * Review Status: Pending
 * Risk Level: Level 2
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = __importStar(require("aws-cdk-lib"));
const dotenv = __importStar(require("dotenv"));
const data_stack_1 = require("../lib/data-stack");
const iam_stack_1 = require("../lib/iam-stack");
const compute_stack_1 = require("../lib/compute-stack");
const orchestration_stack_1 = require("../lib/orchestration-stack");
const onboarding_orchestration_stack_1 = require("../lib/onboarding-orchestration-stack");
const api_stack_1 = require("../lib/api-stack");
const monitoring_stack_1 = require("../lib/monitoring-stack");
const bff_stack_1 = require("../lib/bff-stack");
const auth_stack_1 = require("../lib/auth-stack");
const waf_stack_1 = require("../lib/waf-stack");
const frontend_stack_1 = require("../lib/frontend-stack");
const config_loader_1 = require("../../config/config-loader");
// Load environment variables (optional, config file takes precedence)
dotenv.config();
const app = new cdk.App();
// Load configuration from JSON file
const config = config_loader_1.ConfigLoader.load();
// Deployment configuration from config file
const account = process.env.CDK_DEFAULT_ACCOUNT || config.deployment.management_account_id;
const region = config.deployment.region;
const externalId = config.cross_account.external_id;
// Validate required configuration
if (!account) {
    throw new Error('AWS_ACCOUNT_ID or CDK_DEFAULT_ACCOUNT must be set');
}
const env = {
    account,
    region,
};
// ========================================
// Data Stack (DynamoDB + S3)
// ========================================
const dataStack = new data_stack_1.DataStack(app, 'RDSDashboard-Data', {
    env,
    description: 'RDS Dashboard - Data Layer (DynamoDB tables and S3 buckets)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// IAM Stack (Roles and Policies)
// ========================================
const iamStack = new iam_stack_1.IamStack(app, 'RDSDashboard-IAM', {
    env,
    externalId,
    rdsInventoryTable: dataStack.rdsInventoryTable,
    metricsCacheTable: dataStack.metricsCacheTable,
    healthAlertsTable: dataStack.healthAlertsTable,
    auditLogTable: dataStack.auditLogTable,
    approvalsTable: dataStack.approvalsTable,
    dataBucket: dataStack.dataBucket,
    description: 'RDS Dashboard - IAM Layer (Lambda execution role and cross-account roles)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// IAM stack depends on data stack
iamStack.addDependency(dataStack);
// ========================================
// Compute Stack (Lambda Functions)
// ========================================
// Get enabled accounts and regions from config
const targetAccounts = config_loader_1.ConfigLoader.getEnabledAccounts(config);
const targetRegions = config_loader_1.ConfigLoader.getEnabledRegions(config);
const snsTopicArn = `arn:aws:sns:${region}:${account}:rds-dashboard-alerts`;
const computeStack = new compute_stack_1.ComputeStack(app, 'RDSDashboard-Compute', {
    env,
    lambdaExecutionRole: iamStack.lambdaExecutionRole,
    rdsInventoryTable: dataStack.rdsInventoryTable,
    metricsCacheTable: dataStack.metricsCacheTable,
    healthAlertsTable: dataStack.healthAlertsTable,
    auditLogTable: dataStack.auditLogTable,
    approvalsTable: dataStack.approvalsTable,
    onboardingStateTable: dataStack.onboardingStateTable,
    onboardingAuditLogTable: dataStack.onboardingAuditLogTable,
    errorMetricsTable: dataStack.errorMetricsTable,
    externalIdKmsKey: dataStack.externalIdKmsKey,
    dataBucket: dataStack.dataBucket,
    externalId,
    targetAccounts,
    targetRegions,
    snsTopicArn,
    description: 'RDS Dashboard - Compute Layer (Lambda functions)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Compute stack depends on IAM stack
computeStack.addDependency(iamStack);
// ========================================
// Orchestration Stack (EventBridge Rules)
// ========================================
const orchestrationStack = new orchestration_stack_1.OrchestrationStack(app, 'RDSDashboard-Orchestration', {
    env,
    discoveryFunction: computeStack.discoveryFunction,
    healthMonitorFunction: computeStack.healthMonitorFunction,
    discoverySchedule: 'rate(1 hour)', // Every hour
    healthMonitorSchedule: 'rate(5 minutes)', // Every 5 minutes
    description: 'RDS Dashboard - Orchestration Layer (EventBridge scheduled rules)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Orchestration stack depends on compute stack
orchestrationStack.addDependency(computeStack);
// ========================================
// Onboarding Orchestration Stack (EventBridge Rules for Account Discovery)
// ========================================
const onboardingOrchestrationStack = new onboarding_orchestration_stack_1.OnboardingOrchestrationStack(app, 'RDSDashboard-OnboardingOrchestration', {
    env,
    accountDiscoveryFunction: computeStack.accountDiscoveryFunction,
    description: 'RDS Dashboard - Onboarding Orchestration Layer (EventBridge rules for account discovery)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
        Feature: 'AutomatedOnboarding',
    },
});
// Onboarding orchestration stack depends on compute stack
onboardingOrchestrationStack.addDependency(computeStack);
// ========================================
// API Stack (API Gateway)
// ========================================
const apiStack = new api_stack_1.ApiStack(app, 'RDSDashboard-API', {
    env,
    queryHandlerFunction: computeStack.queryHandlerFunction,
    operationsFunction: computeStack.operationsFunction,
    cloudOpsGeneratorFunction: computeStack.cloudOpsGeneratorFunction,
    monitoringFunction: computeStack.monitoringFunction,
    approvalWorkflowFunction: computeStack.approvalWorkflowFunction,
    discoveryFunction: computeStack.discoveryFunction,
    errorResolutionFunction: computeStack.errorResolutionFunction,
    monitoringDashboardFunction: computeStack.monitoringDashboardFunction,
    description: 'RDS Dashboard - API Layer (API Gateway and endpoints)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// API stack depends on compute stack
apiStack.addDependency(computeStack);
// ========================================
// Monitoring Stack (CloudWatch Dashboard and Alarms)
// ========================================
const monitoringStack = new monitoring_stack_1.MonitoringStack(app, 'RDSDashboard-Monitoring', {
    env,
    discoveryFunction: computeStack.discoveryFunction,
    healthMonitorFunction: computeStack.healthMonitorFunction,
    costAnalyzerFunction: computeStack.costAnalyzerFunction,
    complianceCheckerFunction: computeStack.complianceCheckerFunction,
    operationsFunction: computeStack.operationsFunction,
    alertEmail: process.env.ALERT_EMAIL || 'ops@example.com',
    description: 'RDS Dashboard - Monitoring Layer (CloudWatch dashboards and alarms)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// Monitoring stack depends on compute stack
monitoringStack.addDependency(computeStack);
// ========================================
// Auth Stack (Cognito User Pool)
// ========================================
const authStack = new auth_stack_1.AuthStack(app, 'RDSDashboard-Auth', {
    env,
    frontendDomain: process.env.FRONTEND_DOMAIN, // Optional: set for production
    description: 'RDS Dashboard - Auth Layer (Cognito User Pool and groups)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// BFF Stack (Backend-for-Frontend with Express Container)
// ========================================
const bffStack = new bff_stack_1.BffStack(app, 'RDSDashboard-BFF', {
    env,
    internalApiUrl: apiStack.api.url,
    apiKeyId: apiStack.apiKey.keyId,
    userPoolId: authStack.userPool.userPoolId,
    userPoolClientId: authStack.userPoolClient.userPoolClientId,
    frontendUrl: process.env.FRONTEND_URL || process.env.FRONTEND_DOMAIN,
    description: 'RDS Dashboard - BFF Layer (Express container with JWT validation and RBAC)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// BFF stack depends on API and Auth stacks
bffStack.addDependency(apiStack);
bffStack.addDependency(authStack);
// ========================================
// WAF Stack (Web Application Firewall)
// ========================================
const wafStack = new waf_stack_1.WafStack(app, 'RDSDashboard-WAF', {
    env,
    apiGateway: apiStack.api,
    rateLimit: 100, // 100 requests per 5 minutes per IP
    blockedCountries: [], // Add country codes to block if needed (e.g., ['CN', 'RU'])
    enableOWASPRules: true,
    enableBotControl: true,
    description: 'RDS Dashboard - WAF Layer (Web Application Firewall protection)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// WAF stack depends on API stack
wafStack.addDependency(apiStack);
// ========================================
// Frontend Stack (S3 + CloudFront)
// ========================================
const frontendStack = new frontend_stack_1.FrontendStack(app, 'RDSDashboard-Frontend', {
    env,
    customDomain: process.env.FRONTEND_DOMAIN,
    certificateArn: process.env.CERTIFICATE_ARN,
    description: 'RDS Dashboard - Frontend Layer (S3 bucket and CloudFront distribution)',
    tags: {
        Project: 'RDSDashboard',
        ManagedBy: 'CDK',
    },
});
// ========================================
// Stack Tags
// ========================================
cdk.Tags.of(app).add('Project', 'RDSDashboard');
cdk.Tags.of(app).add('ManagedBy', 'CDK');
cdk.Tags.of(app).add('CostCenter', 'DBA-Team');
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0E7Ozs7Ozs7Ozs7R0FVRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFSCx1Q0FBcUM7QUFDckMsaURBQW1DO0FBQ25DLCtDQUFpQztBQUNqQyxrREFBOEM7QUFDOUMsZ0RBQTRDO0FBQzVDLHdEQUFvRDtBQUNwRCxvRUFBZ0U7QUFDaEUsMEZBQXFGO0FBQ3JGLGdEQUE0QztBQUM1Qyw4REFBMEQ7QUFDMUQsZ0RBQTRDO0FBQzVDLGtEQUE4QztBQUM5QyxnREFBNEM7QUFDNUMsMERBQXNEO0FBQ3RELDhEQUEwRDtBQUUxRCxzRUFBc0U7QUFDdEUsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRWhCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLG9DQUFvQztBQUNwQyxNQUFNLE1BQU0sR0FBRyw0QkFBWSxDQUFDLElBQUksRUFBRSxDQUFDO0FBRW5DLDRDQUE0QztBQUM1QyxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7QUFDM0YsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7QUFFcEQsa0NBQWtDO0FBQ2xDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUMsQ0FBQztBQUN2RSxDQUFDO0FBRUQsTUFBTSxHQUFHLEdBQUc7SUFDVixPQUFPO0lBQ1AsTUFBTTtDQUNQLENBQUM7QUFFRiwyQ0FBMkM7QUFDM0MsNkJBQTZCO0FBQzdCLDJDQUEyQztBQUMzQyxNQUFNLFNBQVMsR0FBRyxJ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YUFBYSxHQUFHLElBQUksOEJBQWEsQ0FBQyxHQUFHLEVBQUUsdUJBQXVCLEVBQUU7SUFDcEUsR0FBRztJQUNILFlBQVksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWU7SUFDekMsY0FBYyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZTtJQUMzQyxXQUFXLEVBQUUsd0VBQXdFO0lBQ3JGLElBQUksRUFBRTtRQUNKLE9BQU8sRUFBRSxjQUFjO1FBQ3ZCLFNBQVMsRUFBRSxLQUFLO0tBQ2pCO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsMkNBQTJDO0FBQzNDLGFBQWE7QUFDYiwyQ0FBMkM7QUFDM0MsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUNoRCxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFFL0MsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxyXG4vKipcclxuICogQ0RLIEFwcCBFbnRyeSBQb2ludFxyXG4gKiBcclxuICogR2VuZXJhdGVkIGJ5OiBjbGF1ZGUtMy41LXNvbm5ldFxyXG4gKiBUaW1lc3RhbXA6IDIwMjUtMTEtMTJUMTc6MDA6MDBaXHJcbiAqIFZlcnNpb246IDEuMC4wXHJcbiAqIFBvbGljeSBWZXJzaW9uOiB2MS4wLjBcclxuICogVHJhY2VhYmlsaXR5OiBUQVNLLTEg4oaSIEluZnJhc3RydWN0dXJlIFNldHVwXHJcbiAqIFJldmlldyBTdGF0dXM6IFBlbmRpbmdcclxuICogUmlzayBMZXZlbDogTGV2ZWwgMlxyXG4gKi9cclxuXHJcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcclxuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcclxuaW1wb3J0ICogYXMgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcbmltcG9ydCB7IERhdGFTdGFjayB9IGZyb20gJy4uL2xpYi9kYXRhLXN0YWNrJztcclxuaW1wb3J0IHsgSWFtU3RhY2sgfSBmcm9tICcuLi9saWIvaWFtLXN0YWNrJztcclxuaW1wb3J0IHsgQ29tcHV0ZVN0YWNrIH0gZnJvbSAnLi4vbGliL2NvbXB1dGUtc3RhY2snO1xyXG5pbXBvcnQgeyBPcmNoZXN0cmF0aW9uU3RhY2sgfSBmcm9tICcuLi9saWIvb3JjaGVzdHJhdGlvbi1zdGFjayc7XHJcbmltcG9ydCB7IE9uYm9hcmRpbmdPcmNoZXN0cmF0aW9uU3RhY2sgfSBmcm9tICcuLi9saWIvb25ib2FyZGluZy1vcmNoZXN0cmF0aW9uLXN0YWNrJztcclxuaW1wb3J0IHsgQXBpU3RhY2sgfSBmcm9tICcuLi9saWIvYXBpLXN0YWNrJztcclxuaW1wb3J0IHsgTW9uaXRvcmluZ1N0YWNrIH0gZnJvbSAnLi4vbGliL21vbml0b3Jpbmctc3RhY2snO1xyXG5pbXBvcnQgeyBCZmZTdGFjayB9IGZyb20gJy4uL2xpYi9iZmYtc3RhY2snO1xyXG5pbXBvcnQgeyBBdXRoU3RhY2sgfSBmcm9tICcuLi9saWIvYXV0aC1zdGFjayc7XHJcbmltcG9ydCB7IFdhZlN0YWNrIH0gZnJvbSAnLi4vbGliL3dhZi1zdGFjayc7XHJcbmltcG9ydCB7IEZyb250ZW5kU3RhY2sgfSBmcm9tICcuLi9saWIvZnJvbnRlbmQtc3RhY2snO1xyXG5pbXBvcnQgeyBDb25maWdMb2FkZXIgfSBmcm9tICcuLi8uLi9jb25maWcvY29uZmlnLWxvYWRlcic7XHJcblxyXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyAob3B0aW9uYWwsIGNvbmZpZyBmaWxlIHRha2VzIHByZWNlZGVuY2UpXHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XHJcblxyXG4vLyBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBKU09OIGZpbGVcclxuY29uc3QgY29uZmlnID0gQ29uZmlnTG9hZGVyLmxvYWQoKTtcclxuXHJcbi8vIERlcGxveW1lbnQgY29uZmlndXJhdGlvbiBmcm9tIGNvbmZpZyBmaWxlXHJcbmNvbnN0IGFjY291bnQgPSBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5UIHx8IGNvbmZpZy5kZXBsb3ltZW50Lm1hbmFnZW1lbnRfYWNjb3VudF9pZDtcclxuY29uc3QgcmVnaW9uID0gY29uZmlnLmRlcGxveW1lbnQucmVnaW9uO1xyXG5jb25zdCBleHRlcm5hbElkID0gY29uZmlnLmNyb3NzX2FjY291bnQuZXh0ZXJuYWxfaWQ7XHJcblxyXG4vLyBWYWxpZGF0ZSByZXF1aXJlZCBjb25maWd1cmF0aW9uXHJcbmlmICghYWNjb3VudCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignQVdTX0FDQ09VTlRfSUQgb3IgQ0RLX0RFRkFVTFRfQUNDT1VOVCBtdXN0IGJlIHNldCcpO1xyXG59XHJcblxyXG5jb25zdCBlbnYgPSB7XHJcbiAgYWNjb3VudCxcclxuICByZWdpb24sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIERhdGEgU3RhY2sgKER5bmFtb0RCICsgUzMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgZGF0YVN0YWNrID0gbmV3IERhdGFTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtRGF0YScsIHtcclxuICBlbnYsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gRGF0YSBMYXllciAoRHluYW1vREIgdGFibGVzIGFuZCBTMyBidWNrZXRzKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBJQU0gU3RhY2sgKFJvbGVzIGFuZCBQb2xpY2llcylcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBpYW1TdGFjayA9IG5ldyBJYW1TdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtSUFNJywge1xyXG4gIGVudixcclxuICBleHRlcm5hbElkLFxyXG4gIHJkc0ludmVudG9yeVRhYmxlOiBkYXRhU3RhY2sucmRzSW52ZW50b3J5VGFibGUsXHJcbiAgbWV0cmljc0NhY2hlVGFibGU6IGRhdGFTdGFjay5tZXRyaWNzQ2FjaGVUYWJsZSxcclxuICBoZWFsdGhBbGVydHNUYWJsZTogZGF0YVN0YWNrLmhlYWx0aEFsZXJ0c1RhYmxlLFxyXG4gIGF1ZGl0TG9nVGFibGU6IGRhdGFTdGFjay5hdWRpdExvZ1RhYmxlLFxyXG4gIGFwcHJvdmFsc1RhYmxlOiBkYXRhU3RhY2suYXBwcm92YWxzVGFibGUsXHJcbiAgZGF0YUJ1Y2tldDogZGF0YVN0YWNrLmRhdGFCdWNrZXQsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gSUFNIExheWVyIChMYW1iZGEgZXhlY3V0aW9uIHJvbGUgYW5kIGNyb3NzLWFjY291bnQgcm9sZXMpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBJQU0gc3RhY2sgZGVwZW5kcyBvbiBkYXRhIHN0YWNrXHJcbmlhbVN0YWNrLmFkZERlcGVuZGVuY3koZGF0YVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ29tcHV0ZSBTdGFjayAoTGFtYmRhIEZ1bmN0aW9ucylcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBHZXQgZW5hYmxlZCBhY2NvdW50cyBhbmQgcmVnaW9ucyBmcm9tIGNvbmZpZ1xyXG5jb25zdCB0YXJnZXRBY2NvdW50cyA9IENvbmZpZ0xvYWRlci5nZXRFbmFibGVkQWNjb3VudHMoY29uZmlnKTtcclxuY29uc3QgdGFyZ2V0UmVnaW9ucyA9IENvbmZpZ0xvYWRlci5nZXRFbmFibGVkUmVnaW9ucyhjb25maWcpO1xyXG5cclxuY29uc3Qgc25zVG9waWNBcm4gPSBgYXJuOmF3czpzbnM6JHtyZWdpb259OiR7YWNjb3VudH06cmRzLWRhc2hib2FyZC1hbGVydHNgO1xyXG5cclxuY29uc3QgY29tcHV0ZVN0YWNrID0gbmV3IENvbXB1dGVTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtQ29tcHV0ZScsIHtcclxuICBlbnYsXHJcbiAgbGFtYmRhRXhlY3V0aW9uUm9sZTogaWFtU3RhY2subGFtYmRhRXhlY3V0aW9uUm9sZSxcclxuICByZHNJbnZlbnRvcnlUYWJsZTogZGF0YVN0YWNrLnJkc0ludmVudG9yeVRhYmxlLFxyXG4gIG1ldHJpY3NDYWNoZVRhYmxlOiBkYXRhU3RhY2subWV0cmljc0NhY2hlVGFibGUsXHJcbiAgaGVhbHRoQWxlcnRzVGFibGU6IGRhdGFTdGFjay5oZWFsdGhBbGVydHNUYWJsZSxcclxuICBhdWRpdExvZ1RhYmxlOiBkYXRhU3RhY2suYXVkaXRMb2dUYWJsZSxcclxuICBhcHByb3ZhbHNUYWJsZTogZGF0YVN0YWNrLmFwcHJvdmFsc1RhYmxlLFxyXG4gIG9uYm9hcmRpbmdTdGF0ZVRhYmxlOiBkYXRhU3RhY2sub25ib2FyZGluZ1N0YXRlVGFibGUsXHJcbiAgb25ib2FyZGluZ0F1ZGl0TG9nVGFibGU6IGRhdGFTdGFjay5vbmJvYXJkaW5nQXVkaXRMb2dUYWJsZSxcclxuICBlcnJvck1ldHJpY3NUYWJsZTogZGF0YVN0YWNrLmVycm9yTWV0cmljc1RhYmxlLFxyXG4gIGV4dGVybmFsSWRLbXNLZXk6IGRhdGFTdGFjay5leHRlcm5hbElkS21zS2V5LFxyXG4gIGRhdGFCdWNrZXQ6IGRhdGFTdGFjay5kYXRhQnVja2V0LFxyXG4gIGV4dGVybmFsSWQsXHJcbiAgdGFyZ2V0QWNjb3VudHMsXHJcbiAgdGFyZ2V0UmVnaW9ucyxcclxuICBzbnNUb3BpY0FybixcclxuICBkZXNjcmlwdGlvbjogJ1JEUyBEYXNoYm9hcmQgLSBDb21wdXRlIExheWVyIChMYW1iZGEgZnVuY3Rpb25zKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQ29tcHV0ZSBzdGFjayBkZXBlbmRzIG9uIElBTSBzdGFja1xyXG5jb21wdXRlU3RhY2suYWRkRGVwZW5kZW5jeShpYW1TdGFjayk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIE9yY2hlc3RyYXRpb24gU3RhY2sgKEV2ZW50QnJpZGdlIFJ1bGVzKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IG9yY2hlc3RyYXRpb25TdGFjayA9IG5ldyBPcmNoZXN0cmF0aW9uU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLU9yY2hlc3RyYXRpb24nLCB7XHJcbiAgZW52LFxyXG4gIGRpc2NvdmVyeUZ1bmN0aW9uOiBjb21wdXRlU3RhY2suZGlzY292ZXJ5RnVuY3Rpb24sXHJcbiAgaGVhbHRoTW9uaXRvckZ1bmN0aW9uOiBjb21wdXRlU3RhY2suaGVhbHRoTW9uaXRvckZ1bmN0aW9uLFxyXG4gIGRpc2NvdmVyeVNjaGVkdWxlOiAncmF0ZSgxIGhvdXIpJywgIC8vIEV2ZXJ5IGhvdXJcclxuICBoZWFsdGhNb25pdG9yU2NoZWR1bGU6ICdyYXRlKDUgbWludXRlcyknLCAgLy8gRXZlcnkgNSBtaW51dGVzXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gT3JjaGVzdHJhdGlvbiBMYXllciAoRXZlbnRCcmlkZ2Ugc2NoZWR1bGVkIHJ1bGVzKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gT3JjaGVzdHJhdGlvbiBzdGFjayBkZXBlbmRzIG9uIGNvbXB1dGUgc3RhY2tcclxub3JjaGVzdHJhdGlvblN0YWNrLmFkZERlcGVuZGVuY3koY29tcHV0ZVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gT25ib2FyZGluZyBPcmNoZXN0cmF0aW9uIFN0YWNrIChFdmVudEJyaWRnZSBSdWxlcyBmb3IgQWNjb3VudCBEaXNjb3ZlcnkpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3Qgb25ib2FyZGluZ09yY2hlc3RyYXRpb25TdGFjayA9IG5ldyBPbmJvYXJkaW5nT3JjaGVzdHJhdGlvblN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1PbmJvYXJkaW5nT3JjaGVzdHJhdGlvbicsIHtcclxuICBlbnYsXHJcbiAgYWNjb3VudERpc2NvdmVyeUZ1bmN0aW9uOiBjb21wdXRlU3RhY2suYWNjb3VudERpc2NvdmVyeUZ1bmN0aW9uLFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIE9uYm9hcmRpbmcgT3JjaGVzdHJhdGlvbiBMYXllciAoRXZlbnRCcmlkZ2UgcnVsZXMgZm9yIGFjY291bnQgZGlzY292ZXJ5KScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gICAgRmVhdHVyZTogJ0F1dG9tYXRlZE9uYm9hcmRpbmcnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gT25ib2FyZGluZyBvcmNoZXN0cmF0aW9uIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5vbmJvYXJkaW5nT3JjaGVzdHJhdGlvblN0YWNrLmFkZERlcGVuZGVuY3koY29tcHV0ZVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQVBJIFN0YWNrIChBUEkgR2F0ZXdheSlcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBhcGlTdGFjayA9IG5ldyBBcGlTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtQVBJJywge1xyXG4gIGVudixcclxuICBxdWVyeUhhbmRsZXJGdW5jdGlvbjogY29tcHV0ZVN0YWNrLnF1ZXJ5SGFuZGxlckZ1bmN0aW9uLFxyXG4gIG9wZXJhdGlvbnNGdW5jdGlvbjogY29tcHV0ZVN0YWNrLm9wZXJhdGlvbnNGdW5jdGlvbixcclxuICBjbG91ZE9wc0dlbmVyYXRvckZ1bmN0aW9uOiBjb21wdXRlU3RhY2suY2xvdWRPcHNHZW5lcmF0b3JGdW5jdGlvbixcclxuICBtb25pdG9yaW5nRnVuY3Rpb246IGNvbXB1dGVTdGFjay5tb25pdG9yaW5nRnVuY3Rpb24sXHJcbiAgYXBwcm92YWxXb3JrZmxvd0Z1bmN0aW9uOiBjb21wdXRlU3RhY2suYXBwcm92YWxXb3JrZmxvd0Z1bmN0aW9uLFxyXG4gIGRpc2NvdmVyeUZ1bmN0aW9uOiBjb21wdXRlU3RhY2suZGlzY292ZXJ5RnVuY3Rpb24sXHJcbiAgZXJyb3JSZXNvbHV0aW9uRnVuY3Rpb246IGNvbXB1dGVTdGFjay5lcnJvclJlc29sdXRpb25GdW5jdGlvbixcclxuICBtb25pdG9yaW5nRGFzaGJvYXJkRnVuY3Rpb246IGNvbXB1dGVTdGFjay5tb25pdG9yaW5nRGFzaGJvYXJkRnVuY3Rpb24sXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQVBJIExheWVyIChBUEkgR2F0ZXdheSBhbmQgZW5kcG9pbnRzKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQVBJIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5hcGlTdGFjay5hZGREZXBlbmRlbmN5KGNvbXB1dGVTdGFjayk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIE1vbml0b3JpbmcgU3RhY2sgKENsb3VkV2F0Y2ggRGFzaGJvYXJkIGFuZCBBbGFybXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgbW9uaXRvcmluZ1N0YWNrID0gbmV3IE1vbml0b3JpbmdTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtTW9uaXRvcmluZycsIHtcclxuICBlbnYsXHJcbiAgZGlzY292ZXJ5RnVuY3Rpb246IGNvbXB1dGVTdGFjay5kaXNjb3ZlcnlGdW5jdGlvbixcclxuICBoZWFsdGhNb25pdG9yRnVuY3Rpb246IGNvbXB1dGVTdGFjay5oZWFsdGhNb25pdG9yRnVuY3Rpb24sXHJcbiAgY29zdEFuYWx5emVyRnVuY3Rpb246IGNvbXB1dGVTdGFjay5jb3N0QW5hbHl6ZXJGdW5jdGlvbixcclxuICBjb21wbGlhbmNlQ2hlY2tlckZ1bmN0aW9uOiBjb21wdXRlU3RhY2suY29tcGxpYW5jZUNoZWNrZXJGdW5jdGlvbixcclxuICBvcGVyYXRpb25zRnVuY3Rpb246IGNvbXB1dGVTdGFjay5vcGVyYXRpb25zRnVuY3Rpb24sXHJcbiAgYWxlcnRFbWFpbDogcHJvY2Vzcy5lbnYuQUxFUlRfRU1BSUwgfHwgJ29wc0BleGFtcGxlLmNvbScsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gTW9uaXRvcmluZyBMYXllciAoQ2xvdWRXYXRjaCBkYXNoYm9hcmRzIGFuZCBhbGFybXMpJyxcclxuICB0YWdzOiB7XHJcbiAgICBQcm9qZWN0OiAnUkRTRGFzaGJvYXJkJyxcclxuICAgIE1hbmFnZWRCeTogJ0NESycsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBNb25pdG9yaW5nIHN0YWNrIGRlcGVuZHMgb24gY29tcHV0ZSBzdGFja1xyXG5tb25pdG9yaW5nU3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBBdXRoIFN0YWNrIChDb2duaXRvIFVzZXIgUG9vbClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBhdXRoU3RhY2sgPSBuZXcgQXV0aFN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1BdXRoJywge1xyXG4gIGVudixcclxuICBmcm9udGVuZERvbWFpbjogcHJvY2Vzcy5lbnYuRlJPTlRFTkRfRE9NQUlOLCAvLyBPcHRpb25hbDogc2V0IGZvciBwcm9kdWN0aW9uXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQXV0aCBMYXllciAoQ29nbml0byBVc2VyIFBvb2wgYW5kIGdyb3VwcyknLFxyXG4gIHRhZ3M6IHtcclxuICAgIFByb2plY3Q6ICdSRFNEYXNoYm9hcmQnLFxyXG4gICAgTWFuYWdlZEJ5OiAnQ0RLJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQkZGIFN0YWNrIChCYWNrZW5kLWZvci1Gcm9udGVuZCB3aXRoIEV4cHJlc3MgQ29udGFpbmVyKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IGJmZlN0YWNrID0gbmV3IEJmZlN0YWNrKGFwcCwgJ1JEU0Rhc2hib2FyZC1CRkYnLCB7XHJcbiAgZW52LFxyXG4gIGludGVybmFsQXBpVXJsOiBhcGlTdGFjay5hcGkudXJsLFxyXG4gIGFwaUtleUlkOiBhcGlTdGFjay5hcGlLZXkua2V5SWQsXHJcbiAgdXNlclBvb2xJZDogYXV0aFN0YWNrLnVzZXJQb29sLnVzZXJQb29sSWQsXHJcbiAgdXNlclBvb2xDbGllbnRJZDogYXV0aFN0YWNrLnVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXHJcbiAgZnJvbnRlbmRVcmw6IHByb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCBwcm9jZXNzLmVudi5GUk9OVEVORF9ET01BSU4sXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gQkZGIExheWVyIChFeHByZXNzIGNvbnRhaW5lciB3aXRoIEpXVCB2YWxpZGF0aW9uIGFuZCBSQkFDKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQkZGIHN0YWNrIGRlcGVuZHMgb24gQVBJIGFuZCBBdXRoIHN0YWNrc1xyXG5iZmZTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcclxuYmZmU3RhY2suYWRkRGVwZW5kZW5jeShhdXRoU3RhY2spO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBXQUYgU3RhY2sgKFdlYiBBcHBsaWNhdGlvbiBGaXJld2FsbClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCB3YWZTdGFjayA9IG5ldyBXYWZTdGFjayhhcHAsICdSRFNEYXNoYm9hcmQtV0FGJywge1xyXG4gIGVudixcclxuICBhcGlHYXRld2F5OiBhcGlTdGFjay5hcGksXHJcbiAgcmF0ZUxpbWl0OiAxMDAsIC8vIDEwMCByZXF1ZXN0cyBwZXIgNSBtaW51dGVzIHBlciBJUFxyXG4gIGJsb2NrZWRDb3VudHJpZXM6IFtdLCAvLyBBZGQgY291bnRyeSBjb2RlcyB0byBibG9jayBpZiBuZWVkZWQgKGUuZy4sIFsnQ04nLCAnUlUnXSlcclxuICBlbmFibGVPV0FTUFJ1bGVzOiB0cnVlLFxyXG4gIGVuYWJsZUJvdENvbnRyb2w6IHRydWUsXHJcbiAgZGVzY3JpcHRpb246ICdSRFMgRGFzaGJvYXJkIC0gV0FGIExheWVyIChXZWIgQXBwbGljYXRpb24gRmlyZXdhbGwgcHJvdGVjdGlvbiknLFxyXG4gIHRhZ3M6IHtcclxuICAgIFByb2plY3Q6ICdSRFNEYXNoYm9hcmQnLFxyXG4gICAgTWFuYWdlZEJ5OiAnQ0RLJyxcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFdBRiBzdGFjayBkZXBlbmRzIG9uIEFQSSBzdGFja1xyXG53YWZTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRnJvbnRlbmQgU3RhY2sgKFMzICsgQ2xvdWRGcm9udClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBmcm9udGVuZFN0YWNrID0gbmV3IEZyb250ZW5kU3RhY2soYXBwLCAnUkRTRGFzaGJvYXJkLUZyb250ZW5kJywge1xyXG4gIGVudixcclxuICBjdXN0b21Eb21haW46IHByb2Nlc3MuZW52LkZST05URU5EX0RPTUFJTixcclxuICBjZXJ0aWZpY2F0ZUFybjogcHJvY2Vzcy5lbnYuQ0VSVElGSUNBVEVfQVJOLFxyXG4gIGRlc2NyaXB0aW9uOiAnUkRTIERhc2hib2FyZCAtIEZyb250ZW5kIExheWVyIChTMyBidWNrZXQgYW5kIENsb3VkRnJvbnQgZGlzdHJpYnV0aW9uKScsXHJcbiAgdGFnczoge1xyXG4gICAgUHJvamVjdDogJ1JEU0Rhc2hib2FyZCcsXHJcbiAgICBNYW5hZ2VkQnk6ICdDREsnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBTdGFjayBUYWdzXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY2RrLlRhZ3Mub2YoYXBwKS5hZGQoJ1Byb2plY3QnLCAnUkRTRGFzaGJvYXJkJyk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdNYW5hZ2VkQnknLCAnQ0RLJyk7XHJcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdDb3N0Q2VudGVyJywgJ0RCQS1UZWFtJyk7XHJcblxyXG5hcHAuc3ludGgoKTtcclxuIl19